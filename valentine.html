<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Important Question ðŸŽ€</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body {
    margin:0;
    font-family: Arial, sans-serif;
    background: #ffd6e7;
    text-align: center;
    overflow: hidden;
}

/* Screens */
.screen {
    display: none;
    padding-top: 80px;
}

/* Floating hearts */
.heart { position:absolute; width:35px; pointer-events:none; }

/* Buttons container */
.button-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 40px; /* space between YES and NO */
    margin-top: 30px;
}

/* Buttons */
button {
    padding: 15px 30px;
    font-size: 18px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: 0.3s;
}

/* YES */
#yesBtn { background:#ff4d88; color:white; }

/* NO */
#noBtn { background:black; color:white; position:relative; }

/* Game */
#gameArea { width:100%; height:60vh; position:relative; }

/* Hearts in game */
.catchHeart { position:absolute; width:60px; }

/* Final screen photo */
#photo { width:250px; border-radius:20px; margin-top:20px; }

/* Confetti styling for fallback */
.confetti {
    position:absolute;
    width:10px;
    height:10px;
    background:red;
}
</style>
</head>
<body>

<audio id="music" loop>
<source src="song.mp3">
</audio>

<!-- Loading -->
<div id="loading" class="screen" style="display:block;">
<h1>Checking Love Compatibility... ðŸ«£</h1>
<h2 id="loadingText">0%</h2>
</div>

<!-- Compatible -->
<div id="compatible" class="screen">
<h1>ðŸ’– 100% COMPATIBLE ðŸ’–</h1>
<p style="font-size:22px;">YAYYYY you're stuck with me now ðŸ˜‹ðŸŽ€</p>
</div>

<!-- Game -->
<div id="game" class="screen">
<h1>Catch 5 hearts to unlock a VERY important question</h1>
<div id="gameArea"></div>
<h2 id="score">0 / 5</h2>
</div>

<!-- Question -->
<div id="question" class="screen">
<h1>Will you be my Valentine? ðŸ«£ðŸ¤­</h1>
<h2>Try saying 'no' if you can ðŸ˜›</h2>
<div class="button-container">
    <button id="yesBtn">YES ðŸ¤­ðŸ’—ðŸŒ·</button>
    <button id="noBtn">NO ðŸ˜”ðŸ’”ðŸ¥€</button>
</div>
</div>

<!-- Final -->
<div id="final" class="screen">
<h1>YIPPEEEE YOU SAID YESSS ðŸ˜‹ðŸ¤­ðŸ’—ðŸŒ·</h1>
<p id="loveLetter"></p>
<img src="photo.jpg" id="photo">
</div>

<script>
const yesBtn = document.getElementById("yesBtn");
const noBtn = document.getElementById("noBtn");
const finalScreen = document.getElementById("final");
const loadingText = document.getElementById("loadingText");
const gameArea = document.getElementById("gameArea");
const score = document.getElementById("score");

let caught = 0;
let yesScale = 1;

/* Music start */
document.body.addEventListener("click", () => {
    let music = document.getElementById("music");
    music.volume = 0;
    music.play();
    let fade = setInterval(()=> {
        if(music.volume < 1) music.volume += 0.05;
        else clearInterval(fade);
    },200);
},{once:true});

/* Floating hearts */
function createHeart() {
    let heart = document.createElement("img");
    heart.src="heart.png";
    heart.className="heart";
    heart.style.left = Math.random()*100 + "vw";
    heart.style.top = Math.random()*100 + "vh";
    heart.animate([
        { transform:"translate(0,0)" },
        { transform:`translate(${Math.random()*200-100}px,${Math.random()*200-100}px)` }
    ], { duration:4000 + Math.random()*3000, iterations:Infinity, direction:"alternate" });
    document.body.appendChild(heart);
}
setInterval(createHeart,800);

/* Loading screen */
let percent = 0;
let loadInterval = setInterval(()=>{
    percent+=5;
    loadingText.innerText = percent + "%";
    if(percent>=100){
        clearInterval(loadInterval);
        showScreen("compatible");
        setTimeout(()=>{ showScreen("game"); startGame(); }, 2500);
    }
},200);

/* Screen switch */
function showScreen(id){
    document.querySelectorAll(".screen").forEach(s=>s.style.display="none");
    let screen = document.getElementById(id);
    screen.style.display = (id==="question" || id==="final") ? "flex" : "block";
    screen.style.flexDirection = "column";
    screen.style.alignItems = "center";
}

/* Game hearts */
function spawnGameHeart(){
    let heart = document.createElement("img");
    heart.src="heart.png";
    heart.className="catchHeart";
    heart.style.left = Math.random()*80 + "vw";
    heart.style.top = Math.random()*50 + "vh";
    heart.onclick = ()=>{
        caught++;
        score.innerText = caught + " / 5";
        heart.remove();
        if(caught>=5) showScreen("question");
    };
    gameArea.appendChild(heart);
    setTimeout(()=>heart.remove(),2000);
}

function startGame(){ setInterval(spawnGameHeart,1000); }

/* YES button click */
yesBtn.addEventListener("click", ()=>{
    showScreen("final");
    startConfetti();
    typeLetter();
});

/* YES grow when NO clicked */
function growYes(){
    yesScale += 0.25;
    yesBtn.style.transform = `scale(${yesScale})`;
}

/* NO button move */
noBtn.addEventListener("click", ()=>{
    noBtn.style.left = Math.random()*80 + "vw";
    noBtn.style.top = Math.random()*80 + "vh";
    growYes();
});

/* Confetti */
function startConfetti(){
    const duration = 4000;
    const end = Date.now() + duration;
    (function frame(){
        confetti({ particleCount:6, spread:360, startVelocity:30, origin:{x:Math.random(), y:Math.random()*0.5} });
        if(Date.now() < end) requestAnimationFrame(frame);
    })();
}

/* Typewriter */
let message = "YAYAYAYAY, you make me sooo freaking happy. I'm seriously the luckiest person in the world to have you ðŸ¤. (also uhm, I couldn't do anything more about this script because I can't really code ðŸ¤“)"
let i=0;
function typeLetter(){
    let interval = setInterval(()=>{
        document.getElementById("loveLetter").innerHTML += message[i];
        i++;
        if(i>=message.length) clearInterval(interval);
    },50);
}
</script>
</body>
</html>